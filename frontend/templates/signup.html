{% extends "base.html" %}
{% block content %}
<h1>Sign up</h1>
<form id="signupForm" class="card">
  <input name="email" type="email" placeholder="Email" required>
  <input name="password" type="password" placeholder="Password" required>
  <button type="submit">Create account</button>
</form>
<script>
  const form = document.getElementById('signupForm');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(form));
    const r = await fetch('/api/auth/signup', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data), credentials:'include'});
    if(r.ok){ location.href = '/'; } else { alert('Signup failed'); }
  });
</script>
{% endblock %}
